# [ErmisChat](https://ermis.network) Chat SDK for JavaScript

![Platform](https://img.shields.io/badge/platform-JAVASCRIPT-orange.svg)
![Languages](https://img.shields.io/badge/language-TYPESCRIPT-orange.svg)
[![npm](https://img.shields.io/npm/v/ermis-js-sdk.svg?style=popout&colorB=red)](https://www.npmjs.com/package/ermis-js-sdk)

## Table of contents

1.  [Introduction](#introduction)
1.  [Requirements](#requirements)
1.  [Getting started](#getting-started)
1.  [Sending your first message](#sending-your-first-message)
1.  [Additional information](#additional-information)

## Introduction

The ErmisChat SDK for JavaScript allows you to add real-time chat into your client app with minimal effort.

## Requirements

This section shows you the prerequisites you need to check for using ErmisChat SDK for JavaScript. If you have any comments or questions regarding bugs and feature requests.

### Supported browsers

|      Browser      | Supported versions     |
| :---------------: | :--------------------- |
| Internet Explorer | Not supported          |
|       Edge        | 13 or higher           |
|      Chrome       | 16 or higher           |
|      Firefox      | 11 or higher           |
|      Safari       | 7 or higher            |
|       Opera       | 12.1 or higher         |
|    iOS Safari     | 7 or higher            |
|  Android Browser  | 4.4 (Kitkat) or higher |

<br />

## Getting started

The ErmisChat client is setup to allow extension of the base types through use of generics when instantiated. The default instantiation has all generics set to `Record<string, unknown>`.
<br />

## Step by step

### Step 1: Create a API key application from your dashboard

Before installing ErmisChat SDK, you need to create a API key on the [Ermis Dashboard](https://ermis.network). You will need the `Api key` of your Ermis application when initializing the Chat SDK.

> **Note**: Ermis Dashboard coming soon

<br />

### Step 2: Install the Chat SDK

You can install the Chat SDK with either `npm` or `yarn`.

**npm**

```bash
$ npm install ermis-chat-js-sdk
```

> Note: To use npm to install the Chat SDK, Node.js must be first installed on your system.

**yarn**

```bash
$ yarn add ermis-chat-js-sdk
```

### Step 3: Install the WalletConnect

You need to install WalletConnect to sign and login to Chat SDK. [WalletConnect docs](https://docs.walletconnect.com/appkit/javascript/core/installation), [Wagmi docs](https://wagmi.sh)

### Step 4: Login to ErmisChat

After install WalletConnect, you need import the ErmisAuth to Initialize.

```javascript
import { WalletConnect } from 'ermis-chat-js-sdk';
const authInstance = WalletConnect.getInstance(API_KEY, address);
```

#### 4.1: Create challenge

Create challenge message before sign wallet.

```javascript
const challenge = await authInstance.startAuth();
```

#### 4.2: Sign wallet and get token

After receiving the challenge message, you need to sign the wallet to get the signature use [useSignTypedData](https://wagmi.sh/react/api/hooks/useSignTypedData), then get token.

```javascript
const response = await authInstance.getAuth(api_key, address, signature);
```

### Step 5: Import the Chat SDk

Client-side you initialize the Chat client with your API key

```javascript
import { ErmisChat } from 'ermis-chat-js-sdk';
const chatClient = ErmisChat.getInstance(API_KEY, {
  timeout: 6000, // optional
  baseURL: BASE_URL, // optional
});
```

Once initialized, you must specify the current user with connectUser:

```javascript
await chatClient.connectUser(
  {
    api_key: API_KEY,
    id: address, // your address
    name: address,
  },
  `Bearer ${token}`,
);
```

<br />

## Sending your first message

Now that the Chat SDK has been imported, we're ready to start sending a message.
Here are the steps to sending your first message using Chat SDK:

### Step 6: Query users

Get users in your project to create direct message.

#### Get users:

```javascript
await chatClient.queryUsers(project_id, page_size, page);
// project_id:
// page:
// page_size:
```

#### Search users:

```javascript
await chatClient.searchUsers(page, page_size, name, project_id);
// project_id:
// page:
// page_size:
// name
```

#### Get users by userIds:

```javascript
await chatClient.getBatchUsers(users, page, page_size, project_id);
// users:
// page:
// page_size:
```

#### Get contact:

```javascript
await chatClient.queryContacts(project_id);
// project_id:
```

### Step 7: Create new channel

Description

#### New direct message:

```javascript
//Here
```

#### New group:

```javascript
//Here
```

#### Accept invite:

```javascript
//Here
```

#### Reject invite:

```javascript
//Here
```

### Step 8: Channel settings

Description

#### Edit Channel info:

```javascript
//Here
```

#### Members:

```javascript
//Here
```

#### Media & files:

```javascript
//Here
```

#### Permissions:

```javascript
//Here
```

#### Administrators:

```javascript
//Here
```

#### Banned members:

```javascript
//Here
```

### Step 9: Messages

Description

#### Send message:

```javascript
//Here
```

#### React message:

```javascript
//Here
```

#### Edit message:

```javascript
//Here
```

#### Delete message:

```javascript
//Here
```

#### Typing message:

```javascript
//Here
```

#### Unread message:

```javascript
//Here
```

#### Markread message:

```javascript
//Here
```
